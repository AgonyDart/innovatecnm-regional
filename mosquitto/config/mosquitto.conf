# =================================================================
# Mosquitto Configuration File
# =================================================================

# -----------------------------------------------------------------
# Default listener
# Binds to all local network interfaces on the standard MQTT port.
# -----------------------------------------------------------------
listener 1883

# -----------------------------------------------------------------
# Authentication and Access Control
#
# This section is crucial for securing your broker.
# We'll use a simple password file for this example.
#
# Create the password file with the following command:
# mosquitto_passwd -c password.txt esp32_user
# -----------------------------------------------------------------
allow_anonymous true
# password_file /mosquitto/config/password.txt

# -----------------------------------------------------------------
# Persistence
#
# Stores messages (e.g., retained messages, queued messages for
# offline clients) to disk.
# -----------------------------------------------------------------
persistence true
persistence_file mosquitto.db
persistence_location /mosquitto/data/

# -----------------------------------------------------------------
# Logging
#
# Configures how and what Mosquitto logs.
# -----------------------------------------------------------------
log_dest file /mosquitto/log/mosquitto.log
log_type all

# -----------------------------------------------------------------
# Bridge (Optional)
#
# Used to connect this broker to another one.
# -----------------------------------------------------------------
# connection example_bridge
# address test.mosquitto.org:1883
# topic # out 1
# topic # in 1